# Телеграм бот - Тестовое
## Что делает
Работает по тз
```
Модель UserProfileModel
Модель Category: Фрукты, Овощи, Орехи
Модель CategoryItem: Яблоко, Груша, Помидор, Огурец, Грецкий орех, Миндаль


Задача Django:

создать телеграм-бот через botFather, и настроить обработку вебхуков следующим образом:

когда новый пользователь в боте нажимает /start, то запись об этом пользователе заносится в модель userProfileMOdel (туда нужно занести информацию о пользователе которую предоставляет телеграм: chat_id, username и т.д).

Далее, пользователю отправляется в чат сообщение "Привет Мир" и кнопка "Открыть веб-апп", при нажатии на которую открывается страница web_app, на которой отображаем chat_id пользователя и список категорий с позициями:

Фрукты
	- Яблоко
	- Груша

Овощи
	- Помидор
	- Огурец

Орехи
	- Грецкий орех
	- Миндаль


для перенаправления вебхуков с сервера телеграм может понадобится настроить на локальном компе приложение ngrok
```

# Как установить

1. скачать/склонировать репозиторий

```
https://github.com/ayeleukenov/nut-tg-bot
```

2. установить зависимости 
```
pip install -r requirements.txt
```

3. получить файл .env и поместить внутрь nuts_tg_bot_src
4. зайти в venv

```
source venv/bin/activate
```
5. применить миграции

```
python manage.py migrate
```

6. восстановить фикстуры

```
python manage.py loaddata fixtures/auth.json fixtures/dump.json
```

7. запустить вебхук (если еще не был запущен ни разу)

```
python manage.py runbot
```

8а. запустить ngrok

```
ngrok http --domain=stunning-mackerel-creative.ngrok-free.app 8080
```

8б. запустить сервер

```
python manage.py runserver 0:8080
```
